{% extends "app/base.html" %}
{% block content %}
{% load static %}
<html>
<body>
    <!--<h1>Existing Open Orders</h1>-->
    <img src="{% static 'app/images/supper image.jpg' %}" width="50%"   alt="supper logo"/><br/>
    <br> <h2>All Group Orders</h2>
    Here's a list of all group orders. 
    <br>
    <br> <h3> Create New Group Order</h3>
    <a href="addgrouporder">Don't see a group order from your hall to the restaurant your are eyeing? Click to start new group order!</a>
    <br/><br/>

    <form method="POST">
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Choose your Preferred Shop</legend>
        </fieldset>
    <!-- Security token by Django -->
        {% csrf_token %}
    <!-- form -->
    <!-- PROBLEM!!!!! -->
    <div id="div_id_first_name" class="control-group"> <label for="id_first_name" class="control-label requiredField">
    Hall<span class="">*</span> </label> <div class="controls"> <input type="text" name="buyer_hall" maxlength="64" class="textinput textInput" required="" id="id_buyer_hall"> </div> </div> <div id="div_id_buyer_hall" class="control-group"> <label for="id_buyer_hall" class="control-label">
    Shop<span class="">*</span> </label> <div class="controls"> <input type="text" name="shopname" maxlength="64" class="textinput textInput" required="" id="id_shopname"> </div> </div> <div id="div_id_shopname" class="control-group"> <label for="id_shopname" class="control-label">
        
        <div class="form-group">
            <button class="btn btn-outline-info" type="submit"> Filter </button>
        </div>
    </form>

    <table border=1>
        <thead>
            <th>Group Order ID</th>
            <th>Creator's Username</th>
            <th>Hall</th>
            <th>Shop Name</th>
            <th>Order Date</th>
            <th>Order Closing Time</th>
            <th>Order Status</th>
            <th>Action</th>
        </thead>
        {% for order in records %}
        <tr>
            <td> {{ order.0 }} </td>
            <td> {{ order.1 }} </td>
            <td> {{ order.2 }} </td>
            <td> {{ order.3 }} </td>
            <td> {{ order.6 }} </td>
            <td> {{ order.7 }} </td>
            <td> {{ order.8 }} </td>
            <td>
                <a href="addindivorder/{{order.0}}"><button>Join this Group Order</button></a> | 
                <a href="edit/{{cust.0}}"><button>Edit</button></a>
                | 
                <!-- NEED TO CHANGE ABV to  view indiv orders in the grp order, edit should only be accessible by creator to change status only -->
                <form method="POST" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="id" value="{{order.0}}"/>
                <button onclick="return confirm('Are you sure you want to delete {{order.0}}?');" type="submit" name="action" value="delete">Delete</button> 
              </form></td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>

{% endblock content %}
